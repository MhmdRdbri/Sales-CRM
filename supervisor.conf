[program:celery-worker]
process_name=%(program_name)s_%(process_num)02d
command=celery -A salescrm worker -l INFO -P prefork  # Ensure that the right pool is used
autostart=true  # Automatically start the worker when Supervisor starts
autorestart=true  # Automatically restart the worker if it crashes
stopasgroup=true  # Stop the entire group of processes when stopping this one
killasgroup=true  # Ensure the worker's subprocesses are also killed when stopping
numprocs=1  # The number of worker processes to spawn; usually 1 for basic setups
startsecs=10  # Time to wait before considering the process as started
stopwaitsecs=600  # Time to wait for the process to shut down gracefully
redirect_stderr=true  # Redirect stderr to stdout (useful for debugging)
stdout_logfile=/tmp/worker.log  # Path for the Celery worker logs (ensure this path is writable)
stderr_logfile=/tmp/worker.errlog  # Path for error logs (optional but useful)
